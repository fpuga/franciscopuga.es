
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Página personal de Francisco Puga">
      
      
        <meta name="author" content="Francisco Puga">
      
      
        <link rel="canonical" href="https://franciscopuga.es/blog/page/4/">
      
      
        <link rel="prev" href="../../..">
      
      
        <link rel="next" href="../../archive/2021/">
      
      
        <link rel="alternate" type="application/rss+xml" title="Fuente RSS" href="../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="Fuente RSS de contenido actualizado" href="../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.38">
    
    
      
        <title>Index - Francisco Puga</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../extra/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="conocimientoabierto" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#index" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../../.." title="Francisco Puga" class="md-header__button md-logo" aria-label="Francisco Puga" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Francisco Puga
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Index
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Pestañas" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Francisco Puga" class="md-nav__button md-logo" aria-label="Francisco Puga" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Francisco Puga
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Archivo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Archivo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2018/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2017/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2017
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2016/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2016
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2015/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2015
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2014/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2014
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2013/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2013
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2012/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2012
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2011/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2011
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2010/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2010
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2009/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2009
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2008/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2008
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2007/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2007
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#charlas-the-better-parts-por-douglas-crockford" class="md-nav__link">
    <span class="md-ellipsis">
      Charlas «The better Parts» por Douglas Crockford
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recargar-el-navegador-desde-emacs" class="md-nav__link">
    <span class="md-ellipsis">
      Recargar el navegador desde Emacs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelado-de-datos-booleanos-en-la-base-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Modelado de datos booleanos en la base de datos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diy-reparar-el-mando-a-distancia-con-papel-albal" class="md-nav__link">
    <span class="md-ellipsis">
      DIY: Reparar el mando a distancia con papel albal
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usando-geoprocesos-en-gvsig-desde-java" class="md-nav__link">
    <span class="md-ellipsis">
      Usando GeoProcesos en gvSIG desde Java
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="index">Index</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2017-05-28 00:00:00">28 de mayo de 2017</time></li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="charlas-the-better-parts-por-douglas-crockford"><a class="toclink" href="../../2017/05/28/the-better-parts-douglas-crockford/">Charlas «The better Parts» por Douglas Crockford</a></h2>
<p>Seguramente las charlas más conocidas de Crockford son las basadas en su libro <a href="http://conocimientoabierto.es/libro-javascript-the-good-parts-de-douglas-crockford/858/">The good parts</a> y o algunas más modernas a las que llama de «The better parts» donde revisa alguna de sus anteriores prácticas y comenta features de ES6.</p>
<p>Dentro de esta serie de <em>The Better Parts</em> se pueden encontrar varias dadas en distintas momentos, entre ellas.</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=_EF-FO63MXs">The Better Parts | .concat() 2015</a>. El problema de esta charla es que no se ven las transparencias (y a pesar de ser similares) a las slides que usa en otras se hace un poco complicado seguir el hilo. Creo que una de las novedades de esta charla respecto a otra es cuando habla de los <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">Template Literals</a>.</li>
<li><a href="https://www.infoq.com/presentations/efficient-programming-language-es6">The Better Parts. Infoq. Agosto/2014</a>. Las transparencias de esta charla, que también valen de guía para el resto <a href="https://drive.google.com/file/d/0B9h_EQ82pIpuUi02S1dYNmRfZlk/edit">están aquí</a>. La de la JSConfUY me pareció un poco más fluída que esta. Pero hay al menos dos secciones que en esta están mejor explicadas o ampliadas la que llama en las transaprecias <em>New Good Parts in ES6</em> que empieza en el minuto 12 y acaba en el 25. Y cuando explica su <em>constructor pattern</em> (slide 46) a partir del minuto 34. El constructor también lo explica en la JSConfUY pero aquí se entienda mejor.</li>
<li><a href="https://www.youtube.com/watch?v=bo36MrBfTk4">The Better Parts – JSConfUY Septiembre/2014</a>. En apareciencia esta tiene un poco más de carga filosófica que la de Infoq.</li>
</ul>
<p>Yo ví la charla de JSConfUY, ojee la de concat, y fuí a algunas partes concretas de la de InfoQ. Mi recomendación es que veas la de InfoQ. O si no que veas de la JSConfUY y las partes concretas que mencionó de la de InfoQ.</p>
<p>A nivel contenidos las charlas son similares.</p>
<p>Arranca con una cita de Saint-Exupéry, «It seems that perfection is attained not when there is nothing more to add, but when there is nothing more to subtract.» y de como los programadores deben buscar la perfección. Por ello hace incapié en uno de sus habituales, que un lenguaje nos dé un montón de características no significa que tengamos que usarlas todas si no sólo las «buenas».</p>
<p>Luego habla de jslint y de su libro de «The good parts». Combate algunas de las criticas que se hacen de jslint y defiende porqué el estilo de desarrollo no es simplemente un «acuerdo», si no que hay estilos mejores que otros, y que escribir de una determinada forma elimina bugs y por tanto te acerca a la perfección.</p>
<p>Continúa con una mini revisión de esas buenas partes de JavaScript en general mezclándolo con como debería ser el lenguaje del futuro (tiene otra charla sobre esto llamada <a href="https://www.youtube.com/watch?v=NPB34lDZj3E">The Post JavaScript Apocalypse</a>), centrándose en su propuesta para un nuevo tipo de datos numérico llamado <a href="http://dec64.com/">DEC64</a>.</p>
<p>Y termina hablando un poco de JSON.</p>
<h3 id="the-better-parts"><a class="toclink" href="../../2017/05/28/the-better-parts-douglas-crockford/#the-better-parts">The better parts</a></h3>
<p>Entre las prácticas que menciona como mejores están.</p>
<p>* No usar <em>for</em>. Sólo <em>array.forEach</em> y derivados<br />
* No dice nada de <em>for..of</em>, supongo que en el momento todavía no habría una propuesta al respecto, pero si habla de evitar <em>for..in</em> y emplear unicamente <em>Object.keys(object).forEach</em><br />
* Y dice que tampoco usa ya while si no que usa una construcción de este tipo<br />
<code>&lt;br&gt;&lt;/br&gt;function repeat(func) {&lt;br&gt;&lt;/br&gt;  if (func() !== undefined) {&lt;br&gt;&lt;/br&gt;    return repeat(func);&lt;br&gt;&lt;/br&gt;  }&lt;br&gt;&lt;/br&gt;}&lt;br&gt;&lt;/br&gt;</code></p>
<p>Como vemos, y como el mismo dice, estás Better Parts van en la línea de usar JavaScript como un lenguaje funcional.</p>
<p>Especial atención merece su nuevo patrón para la construcción de objetos. Hace tiempo que aboga por no usar <em>new</em> pero también ha dejado de usar <em>Object.create</em>, de hecho ha dejado de usar <em>this</em> para evitar problemas de seguridad. También defiende que la herencia basada en prototipos es una mejor idea que las jerarquías clásicas. Porqué, las jerarquías son en general erróneas, y además suelen establecerse al principio del proyecto, cuando menos información se tiene de como debe ser.</p>
<p>Su patrón para la construcción de objetos tendría este aspecto</p>
<p><code>&lt;br&gt;&lt;/br&gt;function constructor(spec) {&lt;br&gt;&lt;/br&gt;  let {member} = spec,&lt;br&gt;&lt;/br&gt;      {other} = other_constructor(spec),&lt;br&gt;&lt;/br&gt;      method = function () {&lt;br&gt;&lt;/br&gt;        // member, other, method&lt;br&gt;&lt;/br&gt;      };</code></p>
<p>return Object.freeze({<br />
 method,<br />
 other<br />
 });<br />
}</p>
<p>Donde</p>
<ul>
<li><em>spec</em> será generalmente un object literal, que permite inicializar el objeto</li>
<li><em>member</em> será un miembro privado de la clase, no accesible desde el exterior</li>
<li>Esta construcción permite que se pueden llamar tantas veces como se quiera a otros constructores (<em>other_constructor</em>), de ese modo se obtiene herencia múltiple, y se pueden copiar, las funciones de interés de esos otros objetos en nuestro objetos</li>
<li>También puedo crear nuevos métodos (<em>method</em>), que tendrán acceso a los miembros privados, a otros métodos, a lo que proporcione <em>other</em>. En este caso <em>method</em> es público porque se devuelve al llamante pero con el mismo diseño podría ser un método privado</li>
<li>Se devuelve un nuevo objeto (el literal dentro de freeze, con todos los métodos de interés)</li>
<li>Lo congela para hacerlo inmutable, con todas las implicaciones que eso trae. Seguridad, comparaciones más sencillas, …</li>
<li>Comenta que este sistema tiene un costo en memoria. Al contrario que otras estrategias que reaprovechan los métodos, en esta <em>method</em> sería creado cada vez. Pero a cambio es muy rápido, porque no hay que recorrer el prototype chain para encontrar las claves si no que están directamente en el propio objeto</li>
</ul>
<p>En otro momento, me gustaría hacer un artículo con los distintos patrones de creación de objetos de Javascript, pero debo decir que este me convence mucho, porque debe ser de las pocas veces que veo algo de este tema en JS que parece tener sentido a la primera. Lo que no comprendo es porque llama «constructor» a su función de ejemplo cuando en realidad es una «factory».</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2017-05-21 00:00:00">21 de mayo de 2017</time></li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="recargar-el-navegador-desde-emacs"><a class="toclink" href="../../2017/05/21/recargar-el-navegador-desde-emacs/">Recargar el navegador desde Emacs</a></h2>
<p>Aunque Emacs no suele aparecer entre los editores preferidos para desarrollo web sigue teniendo opciones que lo hacen interesante.</p>
<p>En este artículo vamos a comentar algunos «plugins» que nos ayudan a recargar el navegador automáticamente cuando hacemos cambios en el código. No todos funcionan en las últimas versiones de Emacs, pero los dejo en el artículo para saber lo que hay disponible, o al menos lo que no merece la pena probar.</p>
<h3 id="conclusiones"><a class="toclink" href="../../2017/05/21/recargar-el-navegador-desde-emacs/#conclusiones">Conclusiones</a></h3>
<p>Para quien quiera ir directo al grano el que me parece más recomendable en este momento es <a href="https://github.com/tungd/kite-mini.el">Mini Kite Mode</a>, que se comenta al final de listado y que descubrí a través de <a href="https://stackoverflow.com/questions/22192164/remote-controlling-chrome-chromium-browser-from-emacs">esta pregunta de stackoverlow</a>. En las respuestas se mencionan algunos complementos para emacs para trabajar con desarrollo web que no he probado y que también podrían ser interesantes pero están todos desactualizados.</p>
<h3 id="listado-de-plugins"><a class="toclink" href="../../2017/05/21/recargar-el-navegador-desde-emacs/#listado-de-plugins">Listado de plugins</a></h3>
<h4 id="impatient-mode"><a class="toclink" href="../../2017/05/21/recargar-el-navegador-desde-emacs/#impatient-mode">Impatient Mode</a></h4>
<p>Uno de los limitantes de <a href="https://github.com/netguy204/imp.el">Impatient Mode</a> es que hay que habilitar el <em>impatient-mode</em> por cada uno de los buffers que se quieran observar. Aunque supongo que se puede configurar de algún modo algún hook para que automáticamente habilite la observación en los buffers abiertos con determinadas extensiones.</p>
<p>Tras habilitar el modo <code>M-x impatient-mode</code> y lanzar el servidor <code>M-x httpd-start</code> tendremos en localhost un navegador que escuche los cambios <code>http://localhost:8080/imp/</code></p>
<p>Otro de sus problemas es que lo que parece hacer, es cargar dentro de un iframe la web que estamos editando en emacs, y desde el código html/js en el que está empotrado el frame se hace un pooling cada cierto tiempo para ver si el contenido cambia y recargar. Empotrar tu código dentro de un iframe al final excepto para casos sencillos puede ser problemático y el sistema de pooling tampoco es muy efectivo en la práctica, porque cada pocas pulsaciones de teclas se hace un refresco de la página.</p>
<h4 id="skewer-mode"><a class="toclink" href="../../2017/05/21/recargar-el-navegador-desde-emacs/#skewer-mode">Skewer Mode</a></h4>
<p>Para hacer funcionar <a href="https://github.com/skeeto/skewer-mode">Skewer Mode</a> seguramente haya que hacer un par de pruebas, pero hay un <a href="https://www.youtube.com/watch?v=VEcobuYr5wg">vídeo</a> y una <a href="https://emacs.stackexchange.com/questions/2376/how-to-use-skewer-mode">pregunta de stackexchange</a> que pueden ayudar.</p>
<p>La parte interesante de este modo es que permite abrir un buffer en modo REPL para javascript. De modo que podemos evaluar el código js directamente en emacs como si estuvieramos usando la consola del navegador. O podemos editar nuestra fuente javascript y relanzar una función o porciones de código al navegador.</p>
<p>Uno de los mayores limitante es que la recarga no es automática, y en el modo html funciona tag a tag. Es decir, no podemos reenviar el buffer entero al navegador, si no sólo los tags que nos interesen. Lo que hace es modificar el dom, para actulizar el contenido de los tags. No lo he encontrado especialmente cómodo, pero tiene algunas extensiones que podrían simplificar el trabajo como <a href="https://github.com/purcell/skewer-less">skewer-less</a> o <a href="https://github.com/NateEag/skewer-reload-stylesheets">skewer-reload-stylesheets</a>.</p>
<h4 id="emacs-browser-refresh"><a class="toclink" href="../../2017/05/21/recargar-el-navegador-desde-emacs/#emacs-browser-refresh">Emacs browser refresh</a></h4>
<p><a href="https://github.com/syohex/emacs-browser-refresh">Browser refresh</a> es una idea sencilla e interesante. Basicamente usa <a href="http://semicomplete.com/projects/xdotool">xdotool</a>, una herramienta que permite scriptear movimiento de ratón y pulsaciones de teclas, para poner la ventana del navegador en foco y pulsar «F5», cuando le damos a salvar. El script original no funciona del todo bien, y aunque es fácil de arreglar es una solución «error prone». Si tenemos varias ventanas del navegador abiertas, o hemos cambiado de pestaña puede funcionar incorrectamente.</p>
<h4 id="gc-refresh-mode"><a class="toclink" href="../../2017/05/21/recargar-el-navegador-desde-emacs/#gc-refresh-mode">GC Refresh Mode</a></h4>
<p>De nuevo una buena idea pero el código de <a href="https://github.com/Unitech/gc-refresh-mode">GC Refresh Mode</a> está desactualizado y no funciona. Al activar el modo <code>M-x gc-refresh-mode</code> pregunta la url a recargar, que puede ser un http://localhost o un file:///, abre esa uri en chrome en modo remote-debugging y sobreescribe <em>C-x C-s</em> para que al recargar se ejecute un script en python. El script en python es una implementación muy sencilla del Chrome Debugging Protocol que conecta a un socket con el que comunicarse con la instancia del navegador que abrió antes, busca la pestaña donde está la uri de interés y la recarga.</p>
<p>El problema es que Chrome ya no usa exactamente este sistema y el script no funciona. Este plugin está inspirado en la página de <a href="https://www.emacswiki.org/emacs/SaveAndReloadBrowser">Save And Reload Browser</a> del Emacs Wiki.</p>
<h4 id="chrome-reload-page"><a class="toclink" href="../../2017/05/21/recargar-el-navegador-desde-emacs/#chrome-reload-page">chrome-reload-page</a></h4>
<p>Basándose en la idea de GC Refresh Mode hace algún tiempo escribí <a href="https://github.com/fpuga/trangalladas/tree/master/emacs/chrome-reload-page">un ejemplo de código</a> (funcional) que acabó de subir a github.</p>
<p>Este script usa el <a href="https://developer.chrome.com/devtools/docs/integrating">Chrome debugging protocol</a> para recargar la pestaña. El script lleva empotrado el código de python del fork de max-weller de <a href="https://github.com/max-weller/chrome_remote_shell">chrome_remote_shell</a> para ahorrar trabajo.</p>
<h4 id="mini-kite-mode"><a class="toclink" href="../../2017/05/21/recargar-el-navegador-desde-emacs/#mini-kite-mode">Mini Kite Mode</a></h4>
<p><a href="https://github.com/tungd/kite-mini.el">Mini Kite Mode</a> es la más funcional de las opciones de este artículo.</p>
<p>Se puede instalar directamente desde MELPA. Para usarlo añadiremos a nuestro .emacs, las siguientes líneas.</p>
<p><code>(require 'kite-mini)&lt;br&gt;&lt;/br&gt;(require 'kite-mini-console)&lt;br&gt;&lt;/br&gt;# Automatically Turn on the mode for your buffer of choice.&lt;br&gt;&lt;/br&gt;(add-hook 'js-mode-hook (lambda () (kite-mini-mode t)))&lt;br&gt;&lt;/br&gt;(add-hook 'css-mode-hook (lambda () (kite-mini-mode t)))&lt;br&gt;&lt;/br&gt;(add-hook 'html-mode-hook (lambda () (kite-mini-mode t)))</code></p>
<p>El segundo <em>require</em> sólo es necesario si queremos abrir un buffer de Emacs como una consola js en modo REPL (similar a la consola de DevTools). Y los hooks permiten activar el modo para los buffers de interés en tener que activarlo a mano <code>M-x kite-mini-mode</code></p>
<p>Una vez en un buffer (y través a ver lanzado chrome / chromium en modo remote debug) simplemente conectamos con</p>
<p><code>M-x kite-mini-connect</code></p>
<p>Si la pestaña que tenemos abierta es con la que queremos interactual podemos simplemente pulsar intro. A partir de ese momento podemos lanzar la consola de js, enviar una región al navegador para que sea evaluada, o recargar la pestaña.</p>
<p>El mayor problema, de esta herramienta, y en realidad de todas las que usen el Remote Debug, es que sóla una herramienta puede estar conectada mediante el protocolo a la vez, y las DevTools hace uso de este sistema también. De modo que si kite está conectado y se abren las DevTools kite se desconectará. Y si son las DevTools las que estan activadas cuando hacemos kite-mini-connect, kite no llegará a conectar.</p>
<p>Para simplificar un poco el flujo he editado el fichero de <em>~/.emacs.d/elpa/kite-mini-20160508.406/kite-mini-el</em> para que antes de hacer el reload salve el buffer, quedando así<br />
<code>&lt;br&gt;&lt;/br&gt;(defun kite-mini-reload ()&lt;br&gt;&lt;/br&gt;  (interactive)&lt;br&gt;&lt;/br&gt;  (save-buffer)&lt;br&gt;&lt;/br&gt;  (kite-mini-call-rpc&lt;br&gt;&lt;/br&gt;   "Page.reload"&lt;br&gt;&lt;/br&gt;   (list :ignoreCache t)))</code></p>
<p>De este modo al pulsar <em>C-c C-r</em>, primero salva y luego recarga. El siguiente paso, sería que mientras esté conectado, pulsar <em>C-x C-s</em> salve el buffer y recargue, pero por ahora con esto me llega.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2017-02-09 00:00:00">9 de febrero de 2017</time></li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="modelado-de-datos-booleanos-en-la-base-de-datos"><a class="toclink" href="../../2017/02/09/modelado-de-datos-booleanos-en-la-base-de-datos/">Modelado de datos booleanos en la base de datos</a></h2>
<p>Cuando definimos la información que un usuario puede visualizar o modificar a través de un formulario nos encontraremos datos aparentemente booleanos. Por ejemplo: ¿Hay un pozo en esta aldea?.</p>
<p>La primera aproximación para implementar esta información es poner un checkbox en el formulario y definir el campo como booleano en la base de datos.</p>
<p><code>CREATE TABLE aldea (id serial, pozo boolean);</code></p>
<p>Haciéndolo de este modo existen varios posibles problemas:</p>
<ul>
<li>A nivel usabilidad. Que pasa si el usuario no sabe si hay un pozo. Lógicamente dejará el checkbox sin marcar, pero cuando se revise esa información no se podrá saber si a conciencia se dejo en blanco indicando que no había pozo, o si se desconocía el dato.</li>
<li>A nivel implementación. Por defecto, a no ser que la lógica implementada en cliente lo gestione de otra forma, en la base de datos almacenaremos un valor NULL y no un valor FALSE. Al tener valores nulos las queries que hagamos se pueden complicar, por ejemplo un <em>SELECT * FROM aldea WHERE pozo IS FALSE;</em> no nos devolverá los valores nulos. Si empleamos la tabla para hacer un informe o exportarla a una hoja de cálculo tendremos que lidiar con los nulos, …</li>
</ul>
<p>Por tanto cuando modelemos una información que parezca binaria, preguntémonos (y preguntemos al cliente) si es necesario distinguir entre falso, y desconocer el dato. Si estamos en la segunda situación debemos huír de usar checkboxes y emplear otro tipo de widget, como un combobox donde el usuario pueda escoger «Existe», «No existe» o dejar en blanco si no conoce el dato. A nivel implementación la información del combobox la guardaremos en general como un texto o un tipo enumerado. Y si eres un producto owner que usa algún tipo de documento para definir el modelo de datos a los desarrolladores asegurate siempre de especificar esta información.</p>
<p>Habrá situaciones en las que aún presentando al usuario la información mediante un combo, nos interese modelar el campo como un booleano. En este caso la lógica por encima de la base de datos sería la responsable de traducir el campo en blanco por un nulo, el ‘Existe’ por un true y el ‘No existe’ por un false.</p>
<p>Cuando modelemos un campo en la base de datos que sea verdaderamente binario para evitar confusiones deberíamos implementarlo de esta forma.</p>
<p><code>&lt;br&gt;&lt;/br&gt;CREATE TABLE aldea (&lt;br&gt;&lt;/br&gt;id serial,&lt;br&gt;&lt;/br&gt;pozo boolean NOT NULL DEFAULT false&lt;br&gt;&lt;/br&gt;)&lt;br&gt;&lt;/br&gt;</code></p>
<h4 id="addendum"><a class="toclink" href="../../2017/02/09/modelado-de-datos-booleanos-en-la-base-de-datos/#addendum">Addendum</a></h4>
<p>Cuando trabajamos con campos booleanos que admiten el valor nulo nos podemos encontrar un problema adicional al hacer migraciones de la base de datos. Imaginemos que tenemos un campo <em>contador</em> de tipo <em>boolean</em>, y que en la base de datos tenemos valores a <em>true</em>, <em>false</em> y <em>null</em>. Si a posteriori decidimos cambiar contador por un sistema de medida, con opciones como Contador, Manual, Volumétrico, … hacer la migración hacia adelante será sencillo.</p>
<p><code>&lt;br&gt;&lt;/br&gt;UPDATE myschema.mytable SET sistema_medicion = 'Contador' WHERE contador IS true;&lt;br&gt;&lt;/br&gt;</code></p>
<p>Pero el revert no sería tan sencillo, porque habremos perdido la información de nulos y false.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2016-09-30 00:00:00">30 de septiembre de 2016</time></li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="diy-reparar-el-mando-a-distancia-con-papel-albal"><a class="toclink" href="../../2016/09/30/diy-reparar-mando-distancia-papel-albal/">DIY: Reparar el mando a distancia con papel albal</a></h2>
<p>Cuando el mando a distancia de la televisión tiene cierto uso no es raro que ciertos botones dejen de funcionar. Repararlo es más sencillo de lo que podría parecer.</p>
<p>La mayoría de teclados funcionan por el mismo principio. Un circuito impreso con una membrana por encima para cada tecla. En las membranas hay un conductor que al pulsar cierra el circuito produciendo una señal eléctrica que acaba enviando un código al receptor. A veces se introduce suciedad o se desgasta el conductor que cierra el circuito impidiendo que el botón funcione.</p>
<p>Para repararlo llega con abrir el mando a distancia e intentar limpiarlo o en caso de que no funcione usar papel albal (papel de aluminio). El papel albal es conductor, por tanto poniendo un pedacito con cuidado recubriendo la membrana estaremos «mejorando» la conductividad producida al pulsar la tecla.</p>
<p>Hay que tener cierto cuidado al abrir el mando, es fácil que el teclado se desalinee con el circuito impreso y al poner el albal. Sólo debe hacer contacto al pulsar la tecla, por lo que se puede usar una gotita de pegamento para pegarlo a la membrana.</p>
<p>Olvidé tomar fotos del proceso y con estos mandos de plástico abrir y cerrar a menudo no es buena idea pero <a href="http://www.tuelectronica.es/tutoriales/reparacion/reparacion-mando-a-distancia.html">en internet hay muchos ejemplos del paso a paso</a>.</p>
<p>Antes de tirarte de cabeza a comprar un nuevo objeto porque tenga poco coste, recuerda <a href="http://www.hablandodeciencia.com/articulos/2012/10/18/las-5-erres-reutilizar-reducir-reparar-reciclar-y-regular/">la regla de las cinco erres</a>.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2016-09-04 00:00:00">4 de septiembre de 2016</time></li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="usando-geoprocesos-en-gvsig-desde-java"><a class="toclink" href="../../2016/09/04/usando-geoprocesos-en-gvsig-desde-java/">Usando GeoProcesos en gvSIG desde Java</a></h2>
<p>La semana pasada había <a href="https://listserv.gva.es/pipermail/gvsig_desarrolladores/2016-August/007975.html">un correo en la lista de desarrollo de gvSIG</a> preguntando como poder lanzar geoprocesos desde tu propio plugin mediante Java. Tras una pequeña investigación he escrito <a href="https://github.com/fpuga/trangalladas/blob/master/gvSIG/GeoProcessExampleExtension.java">un código de ejemplo</a> que espero que sea útil a quien tenga esta necesidad.</p>
<h3 id="descargar-el-codigo"><a class="toclink" href="../../2016/09/04/usando-geoprocesos-en-gvsig-desde-java/#descargar-el-codigo">Descargar el código</a></h3>
<p>A mi particularme me gusta descargar el código fuente de las partes de gvSIG con las que voy a trabajar. Esto simplifica el usar las herramientas del IDE para saber como usarlo, encontrar errores, y revisar los tests, en caso de haberlos, para tener pistas de como escribir mi propio código.</p>
<p>Para ello primero se mira la versión del plugin que se corresponda con la versión de gvSIG que estás usando. Creo que lo más fácil es descargar una versión portable de gvSIG. Entrar a la carpeta que contiene el plugin, en este caso <em>org.gvsig.geoprocess.app.mainplugin</em> y abrir el fichero <em>package.info</em>. En la property <strong>version</strong> está el tag del repo correspondiente a esa versión. Por ejemplo para la 2.3RC2 sería el 2.266. Por tanto para descargar el repo haremos:</p>
<p><code>&lt;br&gt;&lt;/br&gt;svn checkout http://devel.gvsig.org/svn/gvsig-geoprocess/org.gvsig.geoprocess/tags/org.gvsig.geoprocess-2.2.66/&lt;br&gt;&lt;/br&gt;</code></p>
<p>A continuación,e n caso de usar Eclipse, iremos a import -&gt; Existing maven projects, e importaremos la raíz del nuevo plugin descargado.</p>
<h3 id="anadir-las-dependencias"><a class="toclink" href="../../2016/09/04/usando-geoprocesos-en-gvsig-desde-java/#anadir-las-dependencias">Añadir las dependencias</a></h3>
<p>Al desarrollar en gvSIG debemos tener en cuenta que las dependencias de nuestro plugin, por decirlo de algún modo, serán de dos tipos. En «Tiempo de desarrollo», y en «Tiempo de ejecución». Las dependencias en desarrollo se definen en el pom del proyecto permitiéndonos definir el classpath de desarrollo para trabajar con las clases que nos hagan falta.</p>
<p>En ejecución, cuando estamos probando o ejecutando gvSIG, el classpath se define de manera dinámica por decirlo de algún modo en el fichero de <em>config.xml</em>. gvSIG buscará entre las dependencias que hayamos definido en el config las clases que se pueden usar en nuestro plugin.</p>
<p>Para que quede claro, a nuestro pom se añadirán otros proyectos maven. A nuestro config se añadirán plugins de gvSIG.</p>
<p>Por ejemplo para el caso de usar los geoprocesos, añadiremos al pom:</p>
<p><code>&lt;br&gt;&lt;/br&gt;&lt;dependency&gt;&lt;br&gt;&lt;/br&gt; &lt;groupid&gt;org.gvsig&lt;/groupid&gt;&lt;br&gt;&lt;/br&gt;   &lt;artifactid&gt;org.gvsig.geoprocess.lib.api&lt;/artifactid&gt;&lt;br&gt;&lt;/br&gt;  &lt;version&gt;2.2.66&lt;/version&gt;&lt;br&gt;&lt;/br&gt;&lt;/dependency&gt;</code></p>
<p><dependency><br />
 <groupid>org.gvsig</groupid><br />
 <artifactid>org.gvsig.geoprocess.lib.sextante</artifactid><br />
 <version>2.2.66</version><br />
</dependency></p>
<p>y al config</p>
<p><code>&lt;br&gt;&lt;/br&gt;&lt;depends plugin-name="org.gvsig.geoprocess.app.sextante"&gt;&lt;/depends&gt;&lt;br&gt;&lt;/br&gt;</code></p>
<h3 id="obtener-el-algoritmo-que-queremos"><a class="toclink" href="../../2016/09/04/usando-geoprocesos-en-gvsig-desde-java/#obtener-el-algoritmo-que-queremos">Obtener el algoritmo que queremos</a></h3>
<p><strong>Esta una de las partes en las que tengo más dudas que esté correcta.</strong></p>
<p>En general accederemos a las funcionalidades de gvSIG a través de un Locator que nos dará un Manager que nos dará la funcionalidad. En el caso de los geoprocesos sería:</p>
<p><code>&lt;br&gt;&lt;/br&gt;String ALG_NAME = "gvSIG-intersection";&lt;br&gt;&lt;/br&gt;SextanteGeoProcessManager manager = (SextanteGeoProcessManager) GeoProcessLocator.getGeoProcessManager();&lt;br&gt;&lt;/br&gt;HashMap&lt;string geoalgorithm=""&gt; algs = manager.getAlgorithms();&lt;br&gt;&lt;/br&gt;GeoAlgorithm alg = algs.get(ALG_NAME);&lt;br&gt;&lt;/br&gt;&lt;/string&gt;</code></p>
<p>Debemos castear a la implementación por defecto del manager <em>SextanteGeoProcessManager</em> porque la interfaz en sí no proporciona el método <em>getAlgorithms</em>. Esto diría que es un bug.</p>
<p>La forma de obtener ALG_NAME, no estoy seguro de cual es. En principio lo más fácil sería poner un breakpoint y mirar los valores de <em>algs</em>. Aunque en mi caso sólo salen los propios de gvSIG y no los de Sextante.</p>
<h3 id="seteando-valores-al-algoritmo"><a class="toclink" href="../../2016/09/04/usando-geoprocesos-en-gvsig-desde-java/#seteando-valores-al-algoritmo">Seteando valores al algoritmo</a></h3>
<p>Todos los algoritmos definen un método <em>defineCharacteristics</em> que nos indican los valores que recibe, tanto de entrada como de salida. Esta definición de valores se obtiene a través del método <em>getParameters</em></p>
<p>En nuestro código debemos obtener cada uno de los parámetros necesarios y setear su valor real para nuestro caso. Por ejemplo:</p>
<p><code>&lt;br&gt;&lt;/br&gt;private void setParams(GeoAlgorithm alg) throws WrongParameterIDException {&lt;br&gt;&lt;/br&gt;  ParametersSet params = alg.getParameters();</code></p>
<p>FLyrVect interLyr = getLayer("inter");<br />
 FlyrVectIVectorLayer inter = new FlyrVectIVectorLayer();<br />
 inter.create(interLyr);</p>
<p>FLyrVect layerLyr = getLayer("layer");<br />
 FlyrVectIVectorLayer layer = new FlyrVectIVectorLayer();<br />
 layer.create(layerLyr);</p>
<p>params.getParameter(IntersectionAlgorithm.INTER).setParameterValue(<br />
 inter);<br />
 params.getParameter(IntersectionAlgorithm.LAYER).setParameterValue(<br />
 layer);<br />
 params.getParameter(IntersectionAlgorithm.SELECTGEOM_INPUT)<br />
 .setParameterValue(false);<br />
 params.getParameter(IntersectionAlgorithm.SELECTGEOM_OVERLAY)<br />
 .setParameterValue(false);<br />
}  </p>
<p>En este caso para no escribir a mano los idenfificadores de los parámetros uso las variables estáticas definidas en el propio algoritmo. Eso hace que haya que añadir al pom el algortimo:</p>
<p><code>&lt;br&gt;&lt;/br&gt;&lt;dependency&gt;&lt;br&gt;&lt;/br&gt; &lt;groupid&gt;org.gvsig&lt;/groupid&gt;&lt;br&gt;&lt;/br&gt;   &lt;artifactid&gt;org.gvsig.geoprocess.algorithm.intersection&lt;/artifactid&gt;&lt;br&gt;&lt;/br&gt;   &lt;version&gt;2.2.66&lt;/version&gt;&lt;br&gt;&lt;/br&gt;&lt;/dependency&gt;&lt;br&gt;&lt;/br&gt;</code></p>
<p>Para las capas de entrada al algoritmo hay que generar una <em>FlyrVectIVectorLayer</em>. Como se muestra en el código de ejemplo lo más sencillo es obtener un <em>FLyrVect</em> y construirla con el create.</p>
<h3 id="ejecutando-el-algoritmo"><a class="toclink" href="../../2016/09/04/usando-geoprocesos-en-gvsig-desde-java/#ejecutando-el-algoritmo">Ejecutando el algoritmo</a></h3>
<p>Los algoritmos se lanzan mediante el método <em>execute</em> que como indica la documentación admite hasta tres parámetros.</p>
<ul>
<li>ITaskMonitor task. Que puede ser nulo y permite monitorizar el estado para por ejemplo poner una barra de progreso al usuario</li>
<li>HashMap<string string=""> outputMap. Que permite modificar los nombres que sextante asigna a los parámetros de salida (en general capas)</string></li>
<li>OutputFactory outputFactory. Define como se crearán los objetos de salida. Puede ser nuestra propia implementación o usar la factoría por defecto</li>
</ul>
<p>Por tanto ejecutarlo sería simplemente:</p>
<p><code>&lt;br&gt;&lt;/br&gt;alg.execute(null, new DefaultOutputFactory(), null);&lt;br&gt;&lt;/br&gt;</code></p>
<h3 id="obteniendo-los-resultados"><a class="toclink" href="../../2016/09/04/usando-geoprocesos-en-gvsig-desde-java/#obteniendo-los-resultados">Obteniendo los resultados</a></h3>
<p>Con la factoría por defecto las capas se crean en un directorio temporal que en linux es <em>/tmp/tmp-andami</em> y les asigna nombres aleatorios (creo que basados en el timestamp). Supongo que habrá alguna utilidad que nos permite ejecutar una especie de FinalActions para añdirlos automáticamente a la vista. O implementando nuestra propia <em>OutputFactory</em> podríamos definir otras rutas. También diría que podemos prescindir del <em>OutputFactory</em> y lanzar el algoritmo mediante <em>processAlgorithm</em> si igual que hicimos con los parámetros de entrada seteamos adecuadamente los valores de salida, especialmente el <em>OutputChannel</em> de las capas.</p>
<p>En todo caso el método <em>getOutputObjects</em> nos devuelve los objetos de salida, así por ejemplo podríamos llegar el <em>FlyrVectIVectorLayer</em> de la capa de polígonos de salida con:</p>
<p><code>&lt;br&gt;&lt;/br&gt;OutputObjectsSet outputSet = alg.getOutputObjects();&lt;br&gt;&lt;/br&gt;OutPut output = outputSet.getOutPut(IntersectionAlgorithm.RESULT_POL)&lt;br&gt;&lt;/br&gt;FlyrVectIVectorLayer result_pol = (FlyrVectIVectorLayer) output.getOutputObject();&lt;br&gt;&lt;/br&gt;</code></p>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../../">1</a> <a class="md-pagination__link" href="../2/">2</a> <a class="md-pagination__link" href="../3/">3</a> <span class="md-pagination__current">4</span> <a class="md-pagination__link" href="../5/">5</a> <a class="md-pagination__link" href="../6/">6</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../39/">39</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2007-2024 Francisco Puga. Bajo licencia CC-BY 4.0.
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/fpuga" target="_blank" rel="noopener" title="fpuga on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://x.com/fpuga" target="_blank" rel="noopener" title="fpuga on X" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://stackoverflow.com/users/930271/francisco-puga" target="_blank" rel="noopener" title="fpuga on StackOverflow" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M290.7 311 95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="hhttps://www.linkedin.com/in/francisco-puga-b25a8361/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "navigation.tabs", "navigation.sections", "toc.follow", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d6f25eb3.min.js"></script>
      
    
  </body>
</html>